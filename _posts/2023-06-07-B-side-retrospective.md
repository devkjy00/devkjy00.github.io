---
title: B-sides for10days 회고
categories: 회고
tags: [team, project, spring, jenkins]
---

## 10일 동안 하나의 웹서비스 개발하기
### 참여 계기
프로젝트 협업 경험을 위해 한참 구글링을 하던중
bside라는 플랫폼에서 팀 매칭을 해주는 서비스가 있는 것을 발견하고 참여하게 되었다.

10일... 
많은 것을 기대할 수는 없겠지만 일단 무언가를 만들어보자는 마음으로 시작했다.

운이 좋게도 팀원들과 분위기가 좋았고, 개발에만 온전히 집중할 수 있었다

### 개발 환경 세팅
- *Jenkins, docker를 이용한 CI/CD 구축*

기획 단계에서 제법 시간이 걸렸기 때문에 개발 환경 세팅에 좀 더 신경을 쓸 수 있었고 처음으로 Jenkins와 docker를 활용해서 배포 자동화를 구현해보았다.

개인 나스 서버를 개발 서버 구축하고 비사이드에서 제공한 네이버 클라우드 플랫폼에 운영 서버를 구축하면서 다중 서버 배포 환경을 구축하게 되었고 

- ***개발 서버***에 올린 Jenkins 컨테이너를 DooD(Docker out of Docker) 방식으로 사용해서 컨테이너로 배포를 진행했다.

- ***운영 서버***에는 ssh, scp를 사용해서 쉘 스크립트를 사용해서 docker-compose를 실행시켜서 배포를 진행했다.

> Docker와 프로파일 분리, 스크립트 작성 등에 대한 공부가 많이 됬고 왜 도커 도커하는지 확실히 알게 됬다... 도커 없이 몬살아~~~!

### 프로젝트
헬스 루틴을 추천해주는 서비스를 만들기로 결정을 했고 본격적으로 개발에 들어갔다.

Spring boot, Mysql, JPA를 활용한 간단한 백엔드 서버였는데 이전에 공부했던 JPA를 활용해서 운동의 타입을 정하고 
***단일 테이블 상속 전략***을 사용해서 구현해 보았다
- 장점
	- 조회하면 자동으로 타입을 구분해서 반환해주기 때문에 편리
	- 추상 클래스를 활용한 다형성 정의를 통해서 깔끔한 로직을 작성할 수 있었다

- 단점 
	- 테이블은 하나.. JPA 연관관계를 위한 엔티티를 생성할 때 구현 클래스의 인스턴스를 생성해야 해서 복잡도가 올라갔다
		- 전달받은 id값만으로는 구현 클래스를 구분할 수 없다.. -> 조회를 해야만 함
	    ```java
			// 연관관계 정의 시 복잡도 증가
			entity1.setEntity2(new {어떤클래스?!?}(1L));
	    ```
		- jpql의 insert문으로 외래키 id를 저장하면 영속화가 되지 않아 동기화 문제..


***요구 사항 변경*** 으로 중간에 DB 스키마를 변경해야 하는 일이 발생했다, 그런데 진작에 설계를 잘했다면 변경없이 사용할 수 있었던 것...
쓰임새는 다르지만 같은 컬럼을 같는 2개의 테이블을 만들었더니 변경에 취약한 구조가 되게 되었다.. 
그래서 테이블을 합치고 구분 컬럼을 추가하는 방식으로 변경을 진행했다.

- 배운점 : 비슷한 데이터를 사용하면 같은 함수를 사용하게 될 가능성이 높다


> 이번 프로젝트로 자동화의 중요성과 편리함 그리고 JPA의 한계에 대해서 고민하게 된거 같다.(하지만 너무 편하다..)